<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>高德地图</title>
    <style>
        #container {
            width: 300px;
            height: 180px;
        }

        ul,
        li {
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .yu {
            background-color: #eee;
            color: #333;
            padding: 10px;
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <div id="container"></div>
    <!-- 不要把我们申请的唯一标识直接在网页中书写 而是利用代理服务器临时请求获取 更安全 -->
    <!-- 工作以后  由专业的服务器人员来完成这部分功能的制作 -->
    <!-- 开发阶段  可以明文书写key 和密钥 在网页中 用于开发使用 -->

    <script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode: "54673691b7de729645b7e092b2e38e08",
        };
    </script>
    <script type="text/javascript"
        src="https://webapi.amap.com/maps?v=1.4.15&key=0c6586a32ac132b0b12fae3c748d1ab8"></script>

    <script>
        //把 id= container的元素 初始化为地图
        //参数2 配置项  --此部分是学习地图的重点
        var map = new AMap.Map("container", {
            zoom: 13, //级别 缩放级别
            center: [116.397428, 39.90923], //中心点坐标
            //利用配置项  创建的同时  添加图层
            layers: [
                //使用多个图层
                new AMap.TileLayer.Satellite(),
                new AMap.TileLayer.RoadNet(),
            ],
            viewMode: "3D", //使用3D视图
        });

        //实时路况图层
        var trafficLayer = new AMap.TileLayer.Traffic({
            zIndex: 10,
        });
        map.add(trafficLayer); //添加图层到地图

        //地图标记
        var marker = new AMap.Marker({
            position: [116.39, 39.9], //位置
        });
        //map.add(marker); //添加到地图

        var infoWindow = new AMap.InfoWindow({
            //创建信息窗体
            isCustom: true, //使用自定义窗体
            content: `<ul class="yu">
            <li>视野四处</li>
            <li>营业时间 9:00~22:00</li>
            <li>联系方式13132420914</li>
            </ul>`, //信息窗体的内容可以是任意html片段
            offset: new AMap.Pixel(16, -45),
        });
        var onMarkerClick = function (e) {
            infoWindow.open(map, e.target.getPosition()); //打开信息窗体
            //e.target就是被点击的Marker
        };
        var marker = new AMap.Marker({
            position: [116.481181, 39.989792],
        });
        map.add(marker);
        marker.on("click", onMarkerClick); //绑定click事件

        //百度  坐标拾取   --可以查询任意地址的经纬度
        //插件  工具条
        AMap.plugin("AMap.ToolBar", function () {
            //异步加载插件
            var toolbar = new AMap.ToolBar();
            map.addControl(toolbar);
        });
        //加载多个工具
        AMap.plugin(
            ["AMap.ToolBar", "AMap.OverView", "AMap.MapType"],
            function () {
                // 异步同时加载多个插件
                var toolbar = new AMap.ToolBar();
                map.addControl(toolbar);
                var overview = new AMap.OverView();
                map.addControl(overview);
                var x = new AMap.MapType();
                map.addControl(x);
            }
        );

        //细节 官方的demo
        //加载天气查询插件
        AMap.plugin("AMap.Weather", function () {
            //创建天气查询实例
            var weather = new AMap.Weather();

            //执行实时天气信息查询
            weather.getLive("西安市", function (err, data) {
                console.log(err, data);
                //后续  利用JS把结果转为HTML显示到页面上
            });
        });
    </script>
</body>

</html>