<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>echarts</title>
</head>

<body>
    <div id="main" style="width: 600px; height: 300px"></div>
    <script src="./echarts/dist/echarts.min.js"></script>
    <script>
        var myChart = echarts.init(document.getElementById('main'))

        // 假数据
        var data = [];
        for (let i = 0; i < 5; ++i) {
            // 获取了一个 0 ~ 200 之间的随机数,四舍五入后取整数
            data.push(Math.round(Math.random() * 200));
        }

        var option = {
            xAxis: {
                max: 'dataMax'  // 取数据中最大值作为 坐标轴的最大值
            },
            yAxis: {
                type: 'category',
                data: ['A', 'B', 'C', 'D', 'E'],
                inverse: true,
                animationDuration: 300,
                animationDurationUpdate: 300,
                max: 4, // 显示排序前n名, max = n - 1
                name: "粉丝数",
                nameLocation: 'start',
            },

            // 系列
            series: [
                {
                    realtimeSort: true,
                    name: 'X',
                    type: 'bar',
                    data: data,
                    label: {
                        show: true,
                        position: 'right',
                        valueAnimation: true
                    }
                }
            ],
            legend: {
                show: true
            },
            animationDuration: 3000,
            animationDurationUpdate: 3000,
            animationEasing: 'linear',
            animationEasingUpdate: 'linear'
        };

        function update() {
            var data = option.series[0].data; // 读取已有数据

            // 遍历数据
            for (var i = 0; i < data.length; ++i) {
                // 通过随机数字来为不同的数据增加, 
                if (Math.random() > 0.9) {
                    data[i] += Math.round(Math.random() * 2000);
                } else {
                    data[i] += Math.round(Math.random() * 200);
                }
            }
            myChart.setOption(option);
        }

        // 每三秒更新一次数据
        setInterval(function () {
            update();
        }, 3000);

        myChart.setOption(option)
    </script>
</body>

</html>