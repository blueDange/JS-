<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拖拽事件</title>
    <style>
        #box {
            background-color: pink;
            width: 300px;
            height: 300px;
        }
    </style>
</head>
<body>
    <!-- 新增了拖拽特性,让用户和网页有了更好的交互方式 -->
    <!-- 默认 img 和 a 标签支持拖拽, 其他标签不支持 -->
    <!-- 可以通过 draggable -->
    <p draggable="true">Hello World!</p>
    <img id="g1" width="200" src="https://web.codeboy.com/msgc/assets/img/logo.png" alt="">

    <div id="box"></div>

    <script>
        const g1 = document.getElementById('g1')
        g1.ondragstart = function(e) {
            console.log('ondragstart:开始拖拽', e);
            // 把拖拽元素的相关信息,存储在拖拽事件里
            // 事件参数中的 dataTransfer 数据传递用于存储数据
            // setData: 用于存储值
            // 参数1: 固定的几个可选值, text代表文本类型的值
            // 参数2: 随意, 此处存的是 img标签 g1
            e.dataTransfer.setData('text','g1')
        }
        // g1.ondrag = function(e) {
        //     // 每350毫秒触发一次
        //     console.log('ondrag:拖拽中', e);
        // }
        g1.ondragend = function(e) {
            console.log('ondragend:拖拽结束', e);
        }
        
        // 当有拖拽元素路过时,触发
        const box = document.getElementById('box')
        box.ondragenter = function() {
            console.log('ondragenter:有拖拽元素进入自身领域')
        }
        box.ondragleave = function() {
            console.log('ondragleave:有拖拽元素离开自身领域')
        }
        box.ondragover = function(e) {
            console.log('ondragover:有拖拽元素在领域闲逛')
            // 阻止默认行为: 对拖拽过来的元素默认有自己的处理方案, 需要阻止才能进行我们自定义的 ondrop 事件
            e.preventDefault()
        }
        box.ondrop = function(e) {
            console.log('ondrop: 有元素被放在自身领域',e)
            // 难点: 怎么知道被放下的元素时哪个元素????

            // 从 数据传输中, 获取 文本信息, 即标签的id
            const id = e.dataTransfer.getData('text')
            // 根据id查找到被放下的元素,加入到box子元素中
            const el  = document.getElementById(id)
            box.appendChild(el)
        }
    </script>
</body>
</html>